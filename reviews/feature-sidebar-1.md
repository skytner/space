# Ревью: `feature/sidebar` #1

**Ветка:** `feature/sidebar`  
**Scope:** Theme (provider, context, useTheme, getTheme, isTheme), Sidebar (SidebarWidget, ссылки), layout с сайдбаром, MapModeProvider/useMapMode, MapModeResolver.

---

## Важно

### 1. Сайдбар: пункт «Map» ведёт на главную

**Файл:** `apps/web/app/layout.tsx`

Сейчас в сайдбаре один пункт: `label: "Map"`, `href: "/"`. По клику пользователь попадает на главную (карточки), а не на страницу карты `/map`. Это путает: ожидается, что «Map» ведёт на карту.

**Варианты:**
- Сделать два пункта: например «Home» → `/` и «Map» → `/map`.
- Либо оставить один пункт «Map» и поставить `href: "/map"`.

Рекомендация: два пункта («Home» и «Map») — тогда навигация совпадает со структурой приложения.

---

## Мелочи

- **themeStorageKey.ts** — в конце файла нет newline. Имеет смысл добавить пустую строку в конец (и при желании включить правило в линтер).
- **getTheme()** — использует `localStorage` без проверки окружения. Сейчас вызывается только в `useEffect` в клиенте, так что ок. Если позже кто-то вызовет его при SSR — будет падение. По желанию можно в начале добавить `if (typeof window === "undefined") return "device";`.

---

## Итог

Критично поправить: п.1 (сайдбар — либо два пункта Home/Map, либо href для «Map» = `/map`). После этого можно коммитить. Остальное — по желанию.
